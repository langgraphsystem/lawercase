# MegaAgent Pro - Production Environment Configuration
# Copy this file to .env and fill in your actual values

# ============================================================================
# Environment
# ============================================================================
ENV=production
DEBUG=false
TESTING=false

# ============================================================================
# Application
# ============================================================================
APP_NAME=MegaAgent Pro
APP_VERSION=1.0.0
API_PREFIX=/api/v1

# Documentation (disable in production for security)
DOCS_URL=
REDOC_URL=

# ============================================================================
# Paths
# ============================================================================
TMP_DIR=./tmp
OUT_DIR=./out
DATA_DIR=./data
LOG_DIR=./logs

# ============================================================================
# Database (PostgreSQL)
# ============================================================================
DB_POSTGRES_HOST=postgres
DB_POSTGRES_PORT=5432
DB_POSTGRES_USER=megaagent
DB_POSTGRES_PASSWORD=CHANGE_ME_IN_PRODUCTION  # pragma: allowlist secret
DB_POSTGRES_DB=megaagent_pro

# Connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Alternative: Full DSN (overrides above if set)
# POSTGRES_DSN=postgresql+asyncpg://user:password@host:port/database  # pragma: allowlist secret

# ============================================================================
# Pinecone Vector Store
# ============================================================================
PINECONE_API_KEY=CHANGE_ME_IN_PRODUCTION
PINECONE_ENVIRONMENT=us-east1-gcp
PINECONE_INDEX_NAME=mega-agent-pro
PINECONE_NAMESPACE=production

# ============================================================================
# Cloudflare R2 Storage
# ============================================================================
R2_ACCOUNT_ID=CHANGE_ME_IN_PRODUCTION
R2_ACCESS_KEY_ID=CHANGE_ME_IN_PRODUCTION
R2_SECRET_ACCESS_KEY=CHANGE_ME_IN_PRODUCTION
R2_BUCKET_NAME=mega-agent-documents
R2_ENDPOINT=https://<account-id>.r2.cloudflarestorage.com

# ============================================================================
# LLM Providers
# ============================================================================
OPENAI_API_KEY=CHANGE_ME_IN_PRODUCTION
ANTHROPIC_API_KEY=optional
GEMINI_API_KEY=optional

# ============================================================================
# Redis (Cache)
# ============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=CHANGE_ME_IN_PRODUCTION

# Connection settings
REDIS_MAX_CONNECTIONS=100
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# Alternative: Full URL (overrides above if set)
# REDIS_URL=redis://:password@host:port/db

# ============================================================================
# Security
# ============================================================================

# JWT Settings (REQUIRED - Generate strong secret!)
SECURITY_JWT_SECRET_KEY=GENERATE_STRONG_SECRET_KEY_HERE
SECURITY_JWT_ALGORITHM=HS256
SECURITY_JWT_EXPIRATION_MINUTES=60
SECURITY_JWT_REFRESH_EXPIRATION_DAYS=7

# API Keys
PROMPT_DETECTION_ENABLED=true
PROMPT_DETECTION_THRESHOLD=0.7
RBAC_POLICY_PATH=config/security/rbac_policy.json
SECURITY_API_KEY_LENGTH=32
SECURITY_API_KEY_PREFIX=sk_

# Rate Limiting
SECURITY_RATE_LIMIT_ENABLED=true
SECURITY_RATE_LIMIT_PER_MINUTE=60
SECURITY_RATE_LIMIT_PER_HOUR=1000

# CORS Settings (IMPORTANT: Restrict in production!)
SECURITY_CORS_ENABLED=true
SECURITY_CORS_ORIGINS=["https://yourdomain.com"]
SECURITY_CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# LLM Providers
# ============================================================================

# OpenAI
LLM_OPENAI_API_KEY=sk-your-openai-api-key-here

# Anthropic (Claude)
LLM_ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Google (Gemini)
LLM_GEMINI_API_KEY=your-gemini-api-key-here

# Cohere
LLM_COHERE_API_KEY=your-cohere-api-key-here

# Model settings
LLM_DEFAULT_MODEL=gpt-4
LLM_FAST_MODEL=gpt-3.5-turbo
LLM_EMBEDDING_MODEL=text-embedding-ada-002
LLM_MAX_TOKENS=4096
LLM_TEMPERATURE=0.7
LLM_TIMEOUT_SECONDS=60
LLM_MAX_RETRIES=3

# ============================================================================
# Telegram Bot (Optional)
# ============================================================================
TELEGRAM_BOT_TOKEN=your-telegram-bot-token-here
TELEGRAM_ALLOWED_USERS=123456789,987654321
TELEGRAM_WEBHOOK_URL=https://yourdomain.com/telegram/webhook
TELEGRAM_WEBHOOK_SECRET=your-webhook-secret-here

# ============================================================================
# External Services
# ============================================================================

# DocRaptor (PDF generation)
DOC_RAPTOR_API_KEY=your-docraptor-key-here

# Adobe OCR
ADOBE_OCR_API_KEY=your-adobe-ocr-key-here

# ============================================================================
# Observability
# ============================================================================

# Tracing
OBSERVABILITY_TRACING_ENABLED=true
OBSERVABILITY_TRACING_EXPORTER=jaeger
OBSERVABILITY_TRACING_SERVICE_NAME=megaagent-pro
OBSERVABILITY_TRACING_ENDPOINT=http://jaeger:14268/api/traces

# Metrics
OBSERVABILITY_METRICS_ENABLED=true
OBSERVABILITY_METRICS_PORT=9090

# Logging
OBSERVABILITY_LOG_LEVEL=INFO
OBSERVABILITY_LOG_FORMAT=json
OBSERVABILITY_LOG_FILE=./logs/app.log
OBSERVABILITY_LOG_ROTATION=1 day
OBSERVABILITY_LOG_RETENTION=30 days

# Health checks
OBSERVABILITY_HEALTH_CHECK_ENABLED=true
OBSERVABILITY_HEALTH_CHECK_INTERVAL=30

# ============================================================================
# Feature Flags
# ============================================================================

# Agent features
FEATURE_ENABLE_SELF_CORRECTION=true
FEATURE_ENABLE_EVIDENCE_ANALYSIS=true
FEATURE_ENABLE_RAG_PIPELINE=true
FEATURE_ENABLE_WORKFLOW_ORCHESTRATION=true

# LLM features
FEATURE_ENABLE_STREAMING=false
FEATURE_ENABLE_FUNCTION_CALLING=true
FEATURE_ENABLE_VISION=false

# Storage features
FEATURE_ENABLE_CACHING=true
FEATURE_ENABLE_VECTOR_STORE=true
FEATURE_ENABLE_AUDIT_LOGGING=true

# API features
FEATURE_ENABLE_API_AUTH=true
FEATURE_ENABLE_RATE_LIMITING=true
FEATURE_ENABLE_REQUEST_VALIDATION=true

# Experimental (disable in production)
FEATURE_ENABLE_EXPERIMENTAL_FEATURES=false

# ============================================================================
# File Processing
# ============================================================================
MAX_UPLOAD_SIZE_MB=50
ALLOWED_FILE_TYPES=[".pdf",".docx",".txt"]
EB1A_PDF_MAX_MB=100

# ============================================================================
# Production Optimization
# ============================================================================

# Worker processes (adjust based on CPU cores)
API_WORKERS=4

# Connection limits
MAX_CONCURRENT_REQUESTS=1000

# Timeouts
REQUEST_TIMEOUT=300
WORKER_TIMEOUT=600
