# ü§ñ Telegram Bot Testing Guide - MegaAgent Pro

## ‚úÖ –°—Ç–∞—Ç—É—Å: –ë–û–¢ –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï

**Bot Username:** `@lawercasebot`
**Bot ID:** `7472625853`
**Status:** ‚úÖ Active and configured

---

## üìã –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ Telegram:

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |
|---------|----------|---------------------|
| `/start` | –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º | `/start` |
| `/help` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–º–∞–Ω–¥–∞–º | `/help` |
| `/ask` | –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å MegaAgent | `/ask –ß—Ç–æ —Ç–∞–∫–æ–µ –≤–∏–∑–∞ H-1B?` |
| `/case_get` | –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–µ–ª–µ | `/case_get CASE-2024-001` |
| `/memory_lookup` | –ü–æ–∏—Å–∫ –≤ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏ | `/memory_lookup –∏–º–º–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã` |
| `/generate_letter` | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω –ø–∏—Å—å–º–∞ | `/generate_letter –ó–∞–ø—Ä–æ—Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤` |

---

## üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–∞–Ω–¥
python test_telegram_bot.py
```

### 2. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ polling
python -m telegram_interface.bot

# –° –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –æ–ø—Ä–æ—Å–∞
python -m telegram_interface.bot --poll-interval 0.5
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞: [@lawercasebot](https://t.me/lawercasebot)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º

---

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã ‚úÖ

```
/start
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å–ø–∏—Å–∫–æ–º –∫–æ–º–∞–Ω–¥

/help
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º
```

### –¢–µ—Å—Ç 2: –ö–æ–º–∞–Ω–¥–∞ /ask ‚ö†Ô∏è

```
/ask –ß—Ç–æ —Ç–∞–∫–æ–µ –≤–∏–∑–∞ H-1B?
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –û—Ç–≤–µ—Ç –æ—Ç MegaAgent —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–∏–∑–µ H-1B

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- MegaAgent –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ LLM API (OpenAI/Anthropic)
```

### –¢–µ—Å—Ç 3: –ö–æ–º–∞–Ω–¥–∞ /case_get ‚ö†Ô∏è

```
/case_get CASE-2024-001
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ–ª–µ –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ "–î–µ–ª–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –¥–µ–ª –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
```

### –¢–µ—Å—Ç 4: –ö–æ–º–∞–Ω–¥–∞ /memory_lookup ‚ö†Ô∏è

```
/memory_lookup –∏–º–º–∏–≥—Ä–∞—Ü–∏—è
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –≤ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å
```

### –¢–µ—Å—Ç 5: –ö–æ–º–∞–Ω–¥–∞ /generate_letter ‚ö†Ô∏è

```
/generate_letter –ó–∞–ø—Ä–æ—Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω –ø–∏—Å—å–º–∞

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π WriterAgent
```

### –¢–µ—Å—Ç 6: –û–±—ã—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚úÖ

```
–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ: –ü—Ä–∏–≤–µ—Ç!
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –û—Ç–≤–µ—Ç –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–æ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω **–≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º**.

–î–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞:

```bash
# –í .env –¥–æ–±–∞–≤—å—Ç–µ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö user_id (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
TELEGRAM_ALLOWED_USERS=123456789,987654321
```

–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π user_id:
1. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É `/start`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - user_id –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –±–æ—Ç–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `structlog`:

```python
logger.info("telegram.start_command", user_id=user_id, username=username)
logger.info("telegram.ask_command", user_id=user_id, question=question)
logger.warning("telegram.unauthorized_access", user_id=user_id)
logger.exception("telegram.error", error=str(e))
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ
curl https://api.telegram.org/bot7472625853:AAGPl30wtI9g57VqYIAO4H2WyXnrZgk4scA  # pragma: allowlist secret/getMe

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook
curl https://api.telegram.org/bot7472625853:AAGPl30wtI9g57VqYIAO4H2WyXnrZgk4scA  # pragma: allowlist secret/getWebhookInfo

# –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
curl https://api.telegram.org/bot7472625853:AAGPl30wtI9g57VqYIAO4H2WyXnrZgk4scA  # pragma: allowlist secret/getUpdates
```

---

## ‚öôÔ∏è –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã:

```bash
pip install python-telegram-bot>=21.4
pip install structlog>=24.4.0
pip install typer>=0.12.3
```

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: "No module named 'telegram_interface.handlers'"

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –§–∞–π–ª `handlers.py` —Å–æ–∑–¥–∞–Ω –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `telegram_interface/`

### –ü—Ä–æ–±–ª–µ–º–∞: "TELEGRAM_BOT_TOKEN is not configured"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env
echo $TELEGRAM_BOT_TOKEN

# –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ .env
TELEGRAM_BOT_TOKEN=7472625853:AAGPl30wtI9g57VqYIAO4H2WyXnrZgk4scA  # pragma: allowlist secret
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω: `python -m telegram_interface.bot`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ—Ç webhook: `python test_telegram_bot.py`

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–º–∞–Ω–¥—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ MegaAgent –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ MemoryManager
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞:

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å LLM API** (–¥–ª—è –∫–æ–º–∞–Ω–¥—ã `/ask`):
   ```bash
   OPENAI_API_KEY=sk-...
   # –∏–ª–∏
   ANTHROPIC_API_KEY=sk-ant-...
   ```

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** (–¥–ª—è `/case_get`):
   ```bash
   POSTGRES_DSN=postgresql://...
   ```

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** (–¥–ª—è `/memory_lookup`):
   ```bash
   PINECONE_API_KEY=...
   ```

4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ production**:
   - –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å systemd service
   - –í–∫–ª—é—á–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

## üéØ –°—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|--------|-----------|
| Bot Token | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω | Active |
| Commands | ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã | 6 –∫–æ–º–∞–Ω–¥ |
| Handlers | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã | –í—Å–µ –∫–æ–º–∞–Ω–¥—ã |
| Authorization | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| Logging | ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ | Structlog |
| Error Handling | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | Try-except –±–ª–æ–∫–∏ |
| MegaAgent Integration | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ | LLM API keys |
| Memory System | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ | Vector DB |
| Case Management | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ | PostgreSQL |

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**Bot:** [@lawercasebot](https://t.me/lawercasebot)

**–¢–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞:**
```
/start
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-13
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
